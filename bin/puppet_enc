#! /usr/bin/env ruby

$LOAD_PATH << File.join(File.dirname(__FILE__), "..", "lib", "stackbuilder")

require 'puppet'
require 'stackbuilder/puppet/indirector/node/stacks'

fail "Usage: puppet_enc FQDN..." if ARGV.empty?

node = Puppet::Node::Stacks.new

ARGV.each do |hostname|
  classes = node.find_stack_classes(hostname)
  puts "# #{hostname}:"
  if classes
    puts classes.to_yaml
  else
    puts "#  no classes found"
  end
end
